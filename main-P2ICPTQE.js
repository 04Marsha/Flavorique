import{A as l,B as _e,C as p,D as y,E as q,F as Ce,G,H as w,I as $,J as Pe,K as be,L as ve,M as pe,N as Oe,O as Me,P as ye,Q as we,R as B,S as L,T,U as v,V as Y,W as Se,X as D,Y as Ie,Z as ke,_ as Le,a as me,aa as R,b as le,c as de,ca as Ne,d as ge,da as Ae,e as ue,ea as Ee,f as fe,fa as ze,g as M,h as S,ha as Te,i as O,j as he,ja as De,k as u,ka as Re,l as f,la as je,m as U,ma as Ve,n as I,na as K,o as s,oa as W,p as _,q as x,r as k,s as h,t as m,u as xe,v as r,w as o,x as g,y as C,z as d}from"./chunk-3GC5YMCG.js";function Ue(t,n){t&1&&(r(0,"button",8),p(1," Sign Up "),o())}function qe(t,n){t&1&&(r(0,"button",9),p(1," Login "),o())}function Ge(t,n){if(t&1){let e=C();r(0,"button",10),d("click",function(){u(e);let a=l();return f(a.onLogout())}),p(1," Logout "),o()}}var Z=class t{constructor(n){this.authService=n}userIsAuthenticated=!1;authListenerSubs;ngOnInit(){this.userIsAuthenticated=this.authService.getIsAuth(),this.authListenerSubs=this.authService.getAuthStatusListener().subscribe(n=>{this.userIsAuthenticated=n})}onLogout(){this.authService.logout()}ngOnDestroy(){this.authListenerSubs.unsubscribe()}static \u0275fac=function(e){return new(e||t)(_(v))};static \u0275cmp=x({type:t,selectors:[["app-header"]],standalone:!1,decls:9,vars:3,consts:[[1,"toolbar"],[1,"flavorique"],["src","Logo.png","alt","Flavorique"],["routerLink","/"],[1,"auth-actions"],["class","signup","routerLink","/auth/signup",4,"ngIf"],["class","login","routerLink","/auth/login",4,"ngIf"],["class","login",3,"click",4,"ngIf"],["routerLink","/auth/signup",1,"signup"],["routerLink","/auth/login",1,"login"],[1,"login",3,"click"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1),g(2,"img",2),r(3,"h1",3),p(4,"Flavorique"),o()(),r(5,"div",4),h(6,Ue,2,0,"button",5)(7,qe,2,0,"button",6)(8,Ge,2,0,"button",7),o()()),e&2&&(s(6),m("ngIf",!i.userIsAuthenticated),s(),m("ngIf",!i.userIsAuthenticated),s(),m("ngIf",i.userIsAuthenticated))},dependencies:[w,L],styles:[".toolbar[_ngcontent-%COMP%]{background-color:#e4d6f7;color:#2f1451;width:100%;max-width:1400px;margin:24px auto;padding:14px 26px;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;border-radius:48px;transition:padding .3s ease}body.scrolled[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{padding:6px 14px}.flavorique[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;background-color:#e4d6f7}.flavorique[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:38px;background-color:#e4d6f7}.flavorique[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Leckerli One,cursive;font-size:30px;background-color:#e4d6f7;cursor:pointer;margin:0}.auth-actions[_ngcontent-%COMP%]{background-color:#e4d6f7;display:flex;gap:10px}.signup[_ngcontent-%COMP%], .login[_ngcontent-%COMP%]{height:42px;padding:0 18px;font-size:20px;font-family:Leckerli One,cursive;background-color:#e4d6f7;color:#2f1451;border-radius:10px;cursor:pointer;transition:all .25s ease;border:none}.signup[_ngcontent-%COMP%]:hover, .login[_ngcontent-%COMP%]:hover{background-color:#2f1451;color:#e4d6f7;transform:translateY(-2px)}@media screen and (max-width: 480px){.toolbar[_ngcontent-%COMP%]{margin:10px auto;padding:10px 14px;border-radius:22px}.flavorique[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:26px}.flavorique[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.auth-actions[_ngcontent-%COMP%]{gap:6px}.signup[_ngcontent-%COMP%], .login[_ngcontent-%COMP%]{height:30px;padding:0 12px;font-size:13px;border-width:1.5px}}"]})};var J=class t{constructor(n){this.authService=n}ngOnInit(){this.authService.autoAuthUser()}static \u0275fac=function(e){return new(e||t)(_(v))};static \u0275cmp=x({type:t,selectors:[["app-root"]],standalone:!1,decls:3,vars:0,template:function(e,i){e&1&&(g(0,"app-header"),r(1,"main"),g(2,"router-outlet"),o())},dependencies:[we,Z],encapsulation:2})};var F=Me.apiUrl+"/posts/",A=class t{constructor(n,e){this.http=n;this.router=e}posts=[];postsUpdated=new le;getPosts(n,e){let i="";n&&e&&(i=`?pageSize=${n}&page=${e}`),this.http.get(F+i).pipe(ue(a=>({posts:a.posts.map(c=>({recipeName:c.recipeName,yourName:c.yourName,recipe:c.recipe,id:c._id,imagePath:c.imagePath,creator:c.creator})),postCount:a.maxPosts}))).subscribe(a=>{this.posts=a.posts,this.postsUpdated.next({posts:[...this.posts],postCount:a.postCount})})}getPostUpdateListener(){return this.postsUpdated.asObservable()}getPost(n){return this.http.get(F+n)}addPost(n,e,i,a){let c=new FormData;c.append("recipeName",n),c.append("yourName",e),c.append("recipe",i),c.append("image",a,n),this.http.post(F,c).subscribe(b=>{this.router.navigate(["/"])})}updatePost(n,e,i,a,c){let b;typeof c=="object"?(b=new FormData,b.append("id",n),b.append("recipeName",e),b.append("yourName",i),b.append("recipe",a),b.append("image",c,e)):b={id:n,recipeName:e,yourName:i,recipe:a,imagePath:c,creator:null},this.http.put(F+n,b).subscribe(z=>{this.router.navigate(["/"])})}deletePost(n){this.http.delete(F+n).subscribe(()=>{this.posts=this.posts.filter(e=>e.id!==n),this.postsUpdated.next({posts:[...this.posts],postCount:this.posts.length})})}static \u0275fac=function(e){return new(e||t)(O(ve),O(B))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})};function Be(t,n){if(t&1){let e=C();r(0,"a",3),d("click",function(){u(e);let a=l();return f(a.onPageChange(a.currentPage-1))}),g(1,"img",4),o()}}function Ye(t,n){if(t&1){let e=C();r(0,"li")(1,"a",5),d("click",function(){let a=u(e).$implicit,c=l();return f(c.onPageChange(a))}),p(2),o()()}if(t&2){let e=n.$implicit,i=l();s(),xe("active",e===i.currentPage),s(),q(" ",e," ")}}function Ke(t,n){if(t&1){let e=C();r(0,"a",3),d("click",function(){u(e);let a=l();return f(a.onPageChange(a.currentPage+1))}),g(1,"img",6),o()}}var Q=class t{totalPosts=0;postsPerPage=8;currentPage=1;pageChange=new U;pages=[];ngOnChanges(){this.updatePages()}updatePages(){if(this.totalPosts<=0||this.postsPerPage<=0){this.pages=[];return}let n=Math.ceil(this.totalPosts/this.postsPerPage);this.pages=Array.from({length:n},(e,i)=>i+1)}onPageChange(n){n<1||n>this.pages.length||(this.currentPage=n,this.pageChange.emit(n))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=x({type:t,selectors:[["app-paginator"]],inputs:{totalPosts:"totalPosts",postsPerPage:"postsPerPage",currentPage:"currentPage"},outputs:{pageChange:"pageChange"},standalone:!1,features:[he],decls:6,vars:3,consts:[[1,"pagination"],["id","img-bg",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["id","img-bg",3,"click"],["src","icons/left.png","alt","left"],[3,"click"],["src","icons/right.png","alt","right"]],template:function(e,i){e&1&&(r(0,"ul",0)(1,"li"),h(2,Be,2,0,"a",1),o(),h(3,Ye,3,3,"li",2),r(4,"li"),h(5,Ke,2,0,"a",1),o()()),e&2&&(s(2),m("ngIf",i.currentPage!==1),s(),m("ngForOf",i.pages),s(2),m("ngIf",i.currentPage!==i.pages.length))},dependencies:[G,w],styles:[".pagination[_ngcontent-%COMP%]{margin:0;padding:10px;border-radius:40px}li[_ngcontent-%COMP%]{display:inline-block;list-style:none;vertical-align:middle}a[_ngcontent-%COMP%]{display:block;width:30px;height:30px;line-height:30px;background-color:#e4d6f7;color:#2f1451;font-size:15px;font-weight:900;font-family:Glegoo;text-align:center;text-decoration:none;border:1px solid #3d324e;border-radius:4px;margin:5px;box-shadow:inset 0 5px 10px #0000001a,0 2px 5px #00000080;transition:all .3s ease}img[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}#img-bg[_ngcontent-%COMP%]{background-color:#2f1451;box-shadow:none;border:none}a[_ngcontent-%COMP%]:hover, a.active[_ngcontent-%COMP%]{background-color:#2f1451;color:#e4d6f7;border:1px solid #e4d6f7;box-shadow:none}a[_ngcontent-%COMP%]:first-child   a[_ngcontent-%COMP%]{border-radius:40px 0 0 40px}a[_ngcontent-%COMP%]:last-child   a[_ngcontent-%COMP%]{border-radius:0 40px 40px 0}@media (hover: none){.pagination[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:none}}@media (max-width: 600px){.pagination[_ngcontent-%COMP%]{margin:40px auto 60px;padding:10px 14px;gap:6px}.pagination[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:34px;height:34px;font-size:14px}}"]})};var X=class t{image;recipeName;name;recipe;close=new U;onClose(){this.close.emit()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=x({type:t,selectors:[["app-post-display"]],inputs:{image:"image",recipeName:"recipeName",name:"name",recipe:"recipe"},outputs:{close:"close"},standalone:!1,decls:11,vars:4,consts:[[1,"display-window",3,"click"],[1,"modal-content",3,"click"],["alt","Expanded Image",3,"src"],[1,"title"],[1,"name"],[1,"recipe"],[1,"close-button",3,"click"]],template:function(e,i){e&1&&(r(0,"div",0),d("click",function(){return i.onClose()}),r(1,"div",1),d("click",function(c){return c.stopPropagation()}),g(2,"img",2),r(3,"h2",3),p(4),o(),r(5,"p",4),p(6),o(),r(7,"p",5),p(8),o(),r(9,"button",6),d("click",function(){return i.onClose()}),p(10,"Close"),o()()()),e&2&&(s(2),m("src",i.image,I),s(2),y(i.recipeName),s(2),y(i.name),s(2),q(" ",i.recipe," "))},styles:[".display-window[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#f7e6ff;padding:20px;border-radius:12px;width:1000px;height:800px;overflow-y:auto;box-shadow:0 4px 20px #0000004d;text-align:center;animation:_ngcontent-%COMP%_scaleUp .3s ease}.modal-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:370px;width:370px;border-radius:20px;margin-bottom:20px}.title[_ngcontent-%COMP%]{background-color:#f7e6ff;color:#2f1451;font-family:Glegoo;font-size:40px;font-weight:600}.name[_ngcontent-%COMP%]{background-color:#f7e6ff;color:#2f1451;font-family:Glegoo;font-size:30px;font-weight:600}.recipe[_ngcontent-%COMP%]{background-color:#f7e6ff;color:#2f1451;font-family:Glegoo;font-size:30px}.close-button[_ngcontent-%COMP%]{margin-top:1rem;padding:10px 20px;background-color:#2f1451;color:#f7e6ff;border:none;border-radius:10px;cursor:pointer;font-size:25px;font-family:Leckerli One;height:50px;width:100px}.close-button[_ngcontent-%COMP%]:hover{font-size:28px;height:53px;width:103px;color:#2f1451;background-color:#f7e6ff}@keyframes _ngcontent-%COMP%_scaleUp{0%{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}@media screen and (max-width: 1024px){.modal-content[_ngcontent-%COMP%]{width:90%;height:90%;padding:30px 20px}.modal-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px;height:300px}.title[_ngcontent-%COMP%]{font-size:35px}.name[_ngcontent-%COMP%], .recipe[_ngcontent-%COMP%]{font-size:26px}.close-button[_ngcontent-%COMP%]{font-size:22px;width:90px;height:45px}}@media screen and (max-width: 600px){.modal-content[_ngcontent-%COMP%]{width:95%;height:auto;max-height:90vh;padding:20px 15px}.modal-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:250px;height:auto}.title[_ngcontent-%COMP%]{font-size:28px}.name[_ngcontent-%COMP%], .recipe[_ngcontent-%COMP%]{font-size:22px}.close-button[_ngcontent-%COMP%]{font-size:20px;width:80px;height:40px}}@media screen and (min-width: 1440px){.modal-content[_ngcontent-%COMP%]{width:900px;height:750px;padding:40px 60px}.modal-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:370px;height:370px}.title[_ngcontent-%COMP%]{font-size:42px}.name[_ngcontent-%COMP%], .recipe[_ngcontent-%COMP%]{font-size:32px}.close-button[_ngcontent-%COMP%]{font-size:26px;width:110px;height:55px}}"]})};var Qe=t=>["/edit",t];function Xe(t,n){t&1&&(r(0,"div",6),g(1,"app-spinner"),o())}function et(t,n){t&1&&(r(0,"button",9),p(1," + Add "),o())}function tt(t,n){if(t&1&&(r(0,"div",7)(1,"h1"),p(2,"Explore Recipes"),o(),h(3,et,2,0,"button",8),o()),t&2){let e=l();s(3),m("ngIf",e.userIsAuthenticated)}}function nt(t,n){if(t&1){let e=C();r(0,"div",15)(1,"button",16),p(2,"Edit"),o(),r(3,"button",17),d("click",function(){u(e);let a=l().$implicit,c=l(2);return f(c.onDelete(a.id))}),p(4,"Delete"),o()()}if(t&2){let e=l().$implicit;s(),m("routerLink",Ce(1,Qe,e.id))}}function it(t,n){if(t&1){let e=C();r(0,"div",12)(1,"img",13),d("click",function(){let a=u(e).$implicit,c=l(2);return f(c.onImageClicked(a.id))}),o(),r(2,"h2"),p(3),o(),r(4,"h3"),p(5),o(),h(6,nt,5,3,"div",14),o()}if(t&2){let e=n.$implicit,i=l(2);s(),m("src",i.getSecureImagePath(e.imagePath),I)("alt",e.recipeName),s(2),y(e.recipeName),s(2),y(e.yourName),s(),m("ngIf",i.userIsAuthenticated&&i.userId==e.creator)}}function ot(t,n){if(t&1&&(r(0,"div",10),h(1,it,7,5,"div",11),o()),t&2){let e=l();s(),m("ngForOf",e.posts)}}function rt(t,n){if(t&1){let e=C();r(0,"div",18)(1,"app-paginator",19),d("pageChange",function(a){u(e);let c=l();return f(c.onPageChange(a))}),o()()}if(t&2){let e=l();s(),m("totalPosts",e.totalPosts)("postsPerPage",e.postsPerPage)("currentPage",e.currentPage)}}function at(t,n){t&1&&(r(0,"p",20),p(1,` No Recipes to display..
`),o())}function st(t,n){if(t&1){let e=C();r(0,"app-post-display",21),d("close",function(){u(e);let a=l();return f(a.closeDisplay())}),o()}if(t&2){let e=l();m("image",e.selectedPost.imagePath)("recipeName",e.selectedPost.recipeName)("name",e.selectedPost.yourName)("recipe",e.selectedPost.recipe)}}var ee=class t{constructor(n,e){this.postsService=n;this.authService=e}posts=[];isLoading=!1;isVisible=!1;postsSub;userIsAuthenticated=!1;authStatusSub;userId;selectedPost=null;totalPosts=0;postsPerPage=8;currentPage=1;ngOnInit(){this.postsService.getPosts(this.postsPerPage,this.currentPage),this.isLoading=!0,this.userId=this.authService.getUserId(),this.postsSub=this.postsService.getPostUpdateListener().subscribe(n=>{this.isLoading=!1,this.posts=n.posts,this.totalPosts=n.postCount}),this.userIsAuthenticated=this.authService.getIsAuth(),this.authStatusSub=this.authService.getAuthStatusListener().subscribe(n=>{this.userIsAuthenticated=n,this.userId=this.authService.getUserId()})}onDelete(n){this.postsService.deletePost(n)}onImageClicked(n){this.isLoading=!0,this.postsService.getPost(n).subscribe(e=>{this.selectedPost={id:e._id,recipeName:e.recipeName,yourName:e.yourName,recipe:e.recipe,imagePath:e.imagePath,creator:e.creator},this.isLoading=!1})}closeDisplay(){this.selectedPost=null}ngOnDestroy(){this.postsSub.unsubscribe(),this.authStatusSub.unsubscribe()}getSecureImagePath(n){return n.startsWith("http://")?n.replace("http://","https://"):n}onPageChange(n){this.currentPage=n,this.isLoading=!0,this.postsService.getPosts(this.postsPerPage,this.currentPage)}static \u0275fac=function(e){return new(e||t)(_(A),_(v))};static \u0275cmp=x({type:t,selectors:[["app-post-list"]],standalone:!1,decls:6,vars:6,consts:[["class","spinner",4,"ngIf"],["class","heading",4,"ngIf"],["class","card-container",4,"ngIf"],["class","paginator",4,"ngIf"],["routerLink","/","id","empty",4,"ngIf"],[3,"image","recipeName","name","recipe","close",4,"ngIf"],[1,"spinner"],[1,"heading"],["routerLink","/create","class","add-button",4,"ngIf"],["routerLink","/create",1,"add-button"],[1,"card-container"],["class","recipe-card",4,"ngFor","ngForOf"],[1,"recipe-card"],[1,"image",3,"click","src","alt"],["class","buttons",4,"ngIf"],[1,"buttons"],["id","edit-button",3,"routerLink"],["id","delete-button",3,"click"],[1,"paginator"],[3,"pageChange","totalPosts","postsPerPage","currentPage"],["routerLink","/","id","empty"],[3,"close","image","recipeName","name","recipe"]],template:function(e,i){e&1&&h(0,Xe,2,0,"div",0)(1,tt,4,1,"div",1)(2,ot,2,1,"div",2)(3,rt,2,3,"div",3)(4,at,2,0,"p",4)(5,st,1,4,"app-post-display",5),e&2&&(m("ngIf",i.isLoading),s(),m("ngIf",!i.isLoading),s(),m("ngIf",i.posts.length>0&&!i.isLoading),s(),m("ngIf",!i.isLoading),s(),m("ngIf",i.posts.length<=0&&!i.isLoading),s(),m("ngIf",i.selectedPost))},dependencies:[G,w,L,Y,Q,X],styles:[".heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:120px auto 60px;padding:0 60px;max-width:1400px}.heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Leckerli One;color:#e4d6f7;font-size:48px;font-weight:400}.add-button[_ngcontent-%COMP%]{background-color:#e4d6f7;color:#2f1451;font-size:28px;font-family:Leckerli One;height:55px;width:180px;border:none;border-radius:12px;cursor:pointer;transition:all .3s ease}.add-button[_ngcontent-%COMP%]:hover{background-color:#2f1451;color:#e4d6f7;transform:scale(1.05)}.card-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:36px;max-width:1400px;margin:0 auto;padding:40px 24px 100px;background-color:#2f1451}#empty[_ngcontent-%COMP%]{font-family:Leckerli One;font-size:32px;color:#e4d6f7;text-align:center;margin:150px auto}.recipe-card[_ngcontent-%COMP%]{background-color:#e4d6f7;color:#2f1451;border-radius:22px;padding:16px 16px 18px;width:100%;display:flex;flex-direction:column;align-items:center;transition:transform .35s ease,box-shadow .35s ease}.recipe-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 15px 40px #00000040}.image[_ngcontent-%COMP%]{width:100%;height:300px;object-fit:cover;border-radius:25px;cursor:pointer}.recipe-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{background-color:#e4d6f7;color:#2f1451}.recipe-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Glegoo;font-size:28px;font-weight:700;text-align:center}.recipe-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Glegoo;font-size:22px;font-weight:400;text-align:center;opacity:.85}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;background-color:#e4d6f7;margin-top:12px}#edit-button[_ngcontent-%COMP%], #delete-button[_ngcontent-%COMP%]{background-color:#2f1451;color:#e4d6f7;font-family:Leckerli One;height:40px;width:45%;font-size:18px;border-radius:20px;border:none;cursor:pointer;transition:all .3s ease}#edit-button[_ngcontent-%COMP%]:hover{transform:scale(1.08)}#delete-button[_ngcontent-%COMP%]:hover{background-color:#a82b2b;transform:scale(1.08)}.paginator[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:40px auto 80px;width:100%}@media (max-width: 1300px){.card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:36px;padding-left:24px;padding-right:24px;justify-items:center}.recipe-card[_ngcontent-%COMP%]{width:100%;max-width:360px}.heading[_ngcontent-%COMP%]{padding-left:24px;padding-right:24px;margin-top:80px}.heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:36px}.image[_ngcontent-%COMP%]{height:320px}}@media (max-width: 600px){.card-container[_ngcontent-%COMP%]{grid-template-columns:1fr;padding-left:16px;padding-right:16px;justify-items:center}.recipe-card[_ngcontent-%COMP%]{width:100%;max-width:300px;padding:12px;border-radius:18px;margin:0}.image[_ngcontent-%COMP%]{height:230px}.heading[_ngcontent-%COMP%]{flex-direction:column;gap:16px;margin-top:40px;padding:0 16px;text-align:center}.heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}.add-button[_ngcontent-%COMP%]{width:100%;max-width:240px;height:44px;font-size:20px}}@media (max-width: 480px){.heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;line-height:1.2}.image[_ngcontent-%COMP%]{height:280px}.recipe-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:6px;font-size:22px}.recipe-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:2px;font-size:16px}}@media (hover: none){.recipe-card[_ngcontent-%COMP%]:hover, .image[_ngcontent-%COMP%]:hover, #edit-button[_ngcontent-%COMP%]:hover, #delete-button[_ngcontent-%COMP%]:hover{transform:none;box-shadow:none}}"]})};var He=t=>{if(t.value==="string")return de(null);let n=t.value,e=new FileReader;return me.create(a=>{e.addEventListener("loadend",()=>{let c=new Uint8Array(e.result).subarray(0,4),b="",z=!1;for(let se=0;se<c.length;se++)b+=c[se].toString(16);switch(b){case"89504e47":z=!0;break;case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":z=!0;break;default:z=!1;break}z?a.next(null):a.next({invalidMimeType:!0}),a.complete()})})};function pt(t,n){t&1&&(r(0,"div",3),g(1,"app-spinner"),o())}function ct(t,n){if(t&1&&(r(0,"div",21),g(1,"img",22),o()),t&2){let e=l(3);s(),m("src",e.imagePreview,I)("alt",e.form.value.recipeName)}}function mt(t,n){if(t&1){let e=C();r(0,"form",6),d("submit",function(){u(e);let a=l(2);return f(a.onSavePost())}),r(1,"div",7)(2,"h2"),p(3,"Upload Recipe"),o()(),r(4,"div",8)(5,"h2"),p(6,"Recipe Name:"),o(),g(7,"input",9),o(),r(8,"div",10)(9,"h2"),p(10,"Your name:"),o(),g(11,"input",11),o(),r(12,"div",12)(13,"h2"),p(14,"Upload Image:"),o(),r(15,"button",13),d("click",function(){u(e);let a=_e(18);return f(a.click())}),p(16," Pick Image "),o(),r(17,"input",14,0),d("change",function(a){u(e);let c=l(2);return f(c.onImagePicked(a))}),o()(),h(19,ct,2,2,"div",15),r(20,"div",16)(21,"h2"),p(22,"Recipe:"),o(),g(23,"textarea",17),o(),r(24,"div",18)(25,"button",19),p(26,"Back"),o(),r(27,"button",20),p(28,"Submit"),o()()()}if(t&2){let e=l(2);m("formGroup",e.form),s(19),m("ngIf",e.imagePreview!==""&&e.imagePreview)}}function lt(t,n){if(t&1&&(r(0,"div",4),h(1,mt,29,2,"form",5),o()),t&2){let e=l();s(),m("ngIf",!e.isLoading)}}var H=class t{constructor(n,e,i){this.postsService=n;this.route=e;this.authService=i}enteredRecipeName="";enteredName="";post;isLoading=!1;form;imagePreview;mode="create";postId;authStatusSub;ngOnInit(){this.authStatusSub=this.authService.getAuthStatusListener().subscribe(n=>{this.isLoading=!1}),this.form=new Le({recipeName:new R(null,{validators:[D.required]}),yourName:new R(null,{validators:[D.required]}),recipe:new R(null,{validators:[D.required]}),image:new R(null,{validators:[D.required],asyncValidators:[He]})}),this.route.paramMap.subscribe(n=>{n.has("postId")?(this.mode="edit",this.postId=n.get("postId"),this.isLoading=!0,this.postsService.getPost(this.postId).subscribe(e=>{this.isLoading=!1,this.post={id:e._id,recipeName:e.recipeName,yourName:e.yourName,recipe:e.recipe,imagePath:e.imagePath,creator:e.creator},this.form.setValue({recipeName:this.post.recipeName,yourName:this.post.yourName,recipe:this.post.recipe,image:this.post.imagePath})})):(this.mode="create",this.postId=null)})}onImagePicked(n){let e=n.target.files[0];this.form.patchValue({image:e}),this.form.get("image").updateValueAndValidity();let i=new FileReader;i.onload=()=>{this.imagePreview=i.result},i.readAsDataURL(e)}onSavePost(){this.form.invalid||(this.isLoading=!0,this.mode==="create"?this.postsService.addPost(this.form.value.recipeName,this.form.value.yourName,this.form.value.recipe,this.form.value.image):this.postsService.updatePost(this.postId,this.form.value.recipeName,this.form.value.yourName,this.form.value.recipe,this.form.value.image),this.form.reset())}ngOnDestroy(){this.authStatusSub.unsubscribe()}static \u0275fac=function(e){return new(e||t)(_(A),_(ye),_(v))};static \u0275cmp=x({type:t,selectors:[["app-post-create"]],standalone:!1,decls:2,vars:2,consts:[["filePicker",""],["class","spinner",4,"ngIf"],["class","upload-window",4,"ngIf"],[1,"spinner"],[1,"upload-window"],[3,"formGroup","submit",4,"ngIf"],[3,"submit","formGroup"],[1,"topic"],[1,"input-recipe-name"],["type","text","name","recipeName","formControlName","recipeName","required",""],[1,"input-name"],["type","text","name","yourName","formControlName","yourName","minlength","3"],[1,"input-image"],["id","input-file","type","button",3,"click"],["type","file",3,"change"],["class","image-preview",4,"ngIf"],[1,"input-recipe"],["rows","10","placeholder","Share your recipe here...","formControlName","recipe","name","recipe"],[1,"buttons"],["id","back","type","button","routerLink","/"],["id","submit","type","submit"],[1,"image-preview"],[3,"src","alt"]],template:function(e,i){e&1&&h(0,pt,2,0,"div",1)(1,lt,2,1,"div",2),e&2&&(m("ngIf",i.isLoading),s(),m("ngIf",!i.isLoading))},dependencies:[w,L,Ne,Se,Ie,ke,ze,Te,Ae,Ee,Y],styles:[".upload-window[_ngcontent-%COMP%]{background-color:#e4d6f7;max-width:900px;width:92%;margin:80px auto;padding:48px 40px;border-radius:28px;font-family:Leckerli One;color:#2f1451;box-shadow:0 18px 45px #2f14514d}.topic[_ngcontent-%COMP%]{background-color:#e4d6f7;text-align:center;margin-bottom:40px}.topic[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:400;font-size:42px;background-color:#e4d6f7}.buttons[_ngcontent-%COMP%]{background-color:#e4d6f7;display:flex;justify-content:center;margin-top:40px;gap:24px}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:140px;height:50px;border:none;border-radius:22px;font-family:Leckerli One;font-size:20px;background-color:#2f1451;color:#e4d6f7;cursor:pointer;transition:transform .25s ease}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.06)}.input-recipe-name[_ngcontent-%COMP%], .input-name[_ngcontent-%COMP%], .input-image[_ngcontent-%COMP%], .input-recipe[_ngcontent-%COMP%]{background-color:#e4d6f7;color:#2f1451;display:flex;flex-direction:column;margin-bottom:28px;gap:10px}.input-recipe-name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .input-name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .input-image[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .input-recipe[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{background-color:#e4d6f7;font-size:24px;font-weight:400}.input-recipe-name[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-name[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:48px;width:100%;border:none;border-radius:14px;padding:0 16px;background-color:#2f1451;color:#e4d6f7;font-family:Leckerli One;font-size:16px}.input-image[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{visibility:hidden}.input-image[_ngcontent-%COMP%]{flex-direction:row;align-items:center;gap:54px}.image-preview[_ngcontent-%COMP%]{width:100%;padding:14px;border-radius:22px;display:flex;align-items:center}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:320px;width:auto;height:auto;object-fit:contain;object-position:center;border-radius:16px}#input-file[_ngcontent-%COMP%]{width:fit-content;min-width:180px;height:44px;border:none;border-radius:14px;font-family:Leckerli One;font-size:18px;background-color:#2f1451;color:#e4d6f7;cursor:pointer;transition:transform .2s ease}#input-file[_ngcontent-%COMP%]:hover{transform:scale(1.04)}.input-recipe[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;min-height:140px;border-radius:14px;border:none;padding:14px;font-family:Leckerli One;font-size:16px;background-color:#2f1451;color:#e4d6f7}.input-recipe[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#e4d6f7;font-weight:500}.input-recipe-name[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-name[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-recipe[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;max-width:100%;box-sizing:border-box}form[_ngcontent-%COMP%]{background-color:#e4d6f7}@media (max-width: 768px){.upload-window[_ngcontent-%COMP%]{padding:32px 24px;margin:60px auto}.topic[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px}.buttons[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;max-width:260px}}@media (max-width: 480px){.upload-window[_ngcontent-%COMP%]{padding:24px 16px;margin:40px auto}.topic[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px}.input-recipe-name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .input-name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .input-image[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .input-recipe[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:18px;height:44px}}"]})};var E=class t{constructor(n,e){this.authService=n;this.router=e}canActivate(n,e){let i=this.authService.getIsAuth();return i||this.router.navigate(["/auth/login"]),i}static \u0275fac=function(e){return new(e||t)(O(v),O(B))};static \u0275prov=M({token:t,factory:t.\u0275fac})};var dt=[{path:"",component:ee},{path:"create",component:H,canActivate:[E]},{path:"edit/:postId",component:H,canActivate:[E]},{path:"auth",loadChildren:()=>import("./chunk-3K4ZGUBL.js").then(t=>t.AuthModule)}],te=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=k({type:t});static \u0275inj=S({providers:[E],imports:[T.forRoot(dt),T]})};var ne=class t{constructor(n){this.authService=n}intercept(n,e){let i=this.authService.getToken(),a=n.clone({headers:n.headers.set("Authorization","Bearer "+i)});return e.handle(a)}static \u0275fac=function(e){return new(e||t)(O(v))};static \u0275prov=M({token:t,factory:t.\u0275fac})};var ie=class t{constructor(n){this.data=n}static \u0275fac=function(e){return new(e||t)(_(Re))};static \u0275cmp=x({type:t,selectors:[["ng-component"]],standalone:!1,decls:7,vars:1,consts:[[1,"dialog"],["mat-dialog-close",""]],template:function(e,i){e&1&&(r(0,"div",0)(1,"h1"),p(2,"An Error Occured"),o(),r(3,"p"),p(4),o(),r(5,"button",1),p(6," Okay "),o()()),e&2&&(s(4),y(i.data.message))},dependencies:[Ve],styles:[".dialog[_ngcontent-%COMP%]{background-color:#2f1451;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#e4d6f7;font-family:Leckerli One;font-size:25px;width:500px;height:500px;border:2px solid #e4e49c;border-radius:20px}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{width:500px;text-align:center;font-weight:400}button[_ngcontent-%COMP%]{background-color:#e4d6f7;color:#2f1451;font-family:Leckerli One;font-size:25px;margin-top:50px;height:50px;width:100px;border:none;border-radius:10px;cursor:pointer}button[_ngcontent-%COMP%]:hover{font-size:28px;color:#e4d6f7;background-color:#2f1451}@media (max-width: 600px){.dialog[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{background-color:#161215;border:none}.dialog[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{width:90%!important;font-size:20px!important}button[_ngcontent-%COMP%]:hover{font-size:22px!important}}"]})};var oe=class t{constructor(n){this.dialog=n}intercept(n,e){return e.handle(n).pipe(fe(i=>{let a="An unknown error occured!";return i.error.message&&(a=i.error.message),this.dialog.open(ie,{data:{message:a}}),ge(()=>i)}))}static \u0275fac=function(e){return new(e||t)(O(je))};static \u0275prov=M({token:t,factory:t.\u0275fac})};var re=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=k({type:t});static \u0275inj=S({imports:[$,T,De,K,W]})};var ae=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=k({type:t,bootstrap:[J]});static \u0275inj=S({providers:[{provide:pe,useClass:ne,multi:!0},{provide:pe,useClass:oe,multi:!0}],imports:[be,te,$,Oe,K,re,W]})};Pe().bootstrapModule(ae,{ngZoneEventCoalescing:!0}).catch(t=>console.error(t));
